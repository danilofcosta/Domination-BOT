2025-09-12 22:56:59,880 - domination.uteis - ERROR - log_error:57 - Erro ao verificar admin no grupo -1001659176163 8321463331: Telegram says: [400 USER_NOT_PARTICIPANT] - The user is not a member of this chat (caused by "channels.GetParticipant")
Traceback (most recent call last):
  File "c:\Users\ryo\Documents\Domination BOT\uteis.py", line 304, in check_admin_group
    chat_member = await client.get_chat_member(chat_id=chat_id, user_id=user_id)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\pyrogram\methods\chats\get_chat_member.py", line 80, in get_chat_member
    r = await self.invoke(
        ^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
    )
    ^
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\pyrogram\methods\advanced\invoke.py", line 79, in invoke
    r = await self.session.invoke(
        ^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
    )
    ^
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\pyrogram\session\session.py", line 389, in invoke
    return await self.send(query, timeout=timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\pyrogram\session\session.py", line 357, in send
    RPCError.raise_it(result, type(data))
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\pyrogram\errors\rpc_error.py", line 91, in raise_it
    raise getattr(
    ...<5 lines>...
      is_signed=is_signed)
pyrogram.errors.exceptions.bad_request_400.UserNotParticipant: Telegram says: [400 USER_NOT_PARTICIPANT] - The user is not a member of this chat (caused by "channels.GetParticipant")
2025-09-12 22:56:59,934 - domination.uteis - ERROR - log_error:57 - Erro ao verificar admin no grupo -1001659176163 8321463331: Telegram says: [400 USER_NOT_PARTICIPANT] - The user is not a member of this chat (caused by "channels.GetParticipant")
Traceback (most recent call last):
  File "c:\Users\ryo\Documents\Domination BOT\uteis.py", line 304, in check_admin_group
    chat_member = await client.get_chat_member(chat_id=chat_id, user_id=user_id)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\pyrogram\methods\chats\get_chat_member.py", line 80, in get_chat_member
    r = await self.invoke(
        ^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
    )
    ^
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\pyrogram\methods\advanced\invoke.py", line 79, in invoke
    r = await self.session.invoke(
        ^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
    )
    ^
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\pyrogram\session\session.py", line 389, in invoke
    return await self.send(query, timeout=timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\pyrogram\session\session.py", line 357, in send
    RPCError.raise_it(result, type(data))
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\pyrogram\errors\rpc_error.py", line 91, in raise_it
    raise getattr(
    ...<5 lines>...
      is_signed=is_signed)
pyrogram.errors.exceptions.bad_request_400.UserNotParticipant: Telegram says: [400 USER_NOT_PARTICIPANT] - The user is not a member of this chat (caused by "channels.GetParticipant")
2025-09-12 22:57:42,613 - domination.uteis - ERROR - log_error:57 - Erro ao verificar admin no grupo -1001659176163 7490545220: Telegram says: [400 USER_NOT_PARTICIPANT] - The user is not a member of this chat (caused by "channels.GetParticipant")
Traceback (most recent call last):
  File "c:\Users\ryo\Documents\Domination BOT\uteis.py", line 304, in check_admin_group
    chat_member = await client.get_chat_member(chat_id=chat_id, user_id=user_id)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\pyrogram\methods\chats\get_chat_member.py", line 80, in get_chat_member
    r = await self.invoke(
        ^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
    )
    ^
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\pyrogram\methods\advanced\invoke.py", line 79, in invoke
    r = await self.session.invoke(
        ^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
    )
    ^
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\pyrogram\session\session.py", line 389, in invoke
    return await self.send(query, timeout=timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\pyrogram\session\session.py", line 357, in send
    RPCError.raise_it(result, type(data))
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\pyrogram\errors\rpc_error.py", line 91, in raise_it
    raise getattr(
    ...<5 lines>...
      is_signed=is_signed)
pyrogram.errors.exceptions.bad_request_400.UserNotParticipant: Telegram says: [400 USER_NOT_PARTICIPANT] - The user is not a member of this chat (caused by "channels.GetParticipant")
2025-09-12 22:57:42,694 - domination.uteis - ERROR - log_error:57 - Erro ao verificar admin no grupo -1001659176163 7490545220: Telegram says: [400 USER_NOT_PARTICIPANT] - The user is not a member of this chat (caused by "channels.GetParticipant")
Traceback (most recent call last):
  File "c:\Users\ryo\Documents\Domination BOT\uteis.py", line 304, in check_admin_group
    chat_member = await client.get_chat_member(chat_id=chat_id, user_id=user_id)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\pyrogram\methods\chats\get_chat_member.py", line 80, in get_chat_member
    r = await self.invoke(
        ^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
    )
    ^
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\pyrogram\methods\advanced\invoke.py", line 79, in invoke
    r = await self.session.invoke(
        ^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
    )
    ^
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\pyrogram\session\session.py", line 389, in invoke
    return await self.send(query, timeout=timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\pyrogram\session\session.py", line 357, in send
    RPCError.raise_it(result, type(data))
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\pyrogram\errors\rpc_error.py", line 91, in raise_it
    raise getattr(
    ...<5 lines>...
      is_signed=is_signed)
pyrogram.errors.exceptions.bad_request_400.UserNotParticipant: Telegram says: [400 USER_NOT_PARTICIPANT] - The user is not a member of this chat (caused by "channels.GetParticipant")
2025-09-13 12:48:42,188 - domination.uteis - ERROR - log_error:57 - Erro ao verificar admin no grupo 6874062454 -1001659176163: The chat_id "6874062454" belongs to a user
Traceback (most recent call last):
  File "C:\Users\ryo\Documents\Domination BOT\uteis.py", line 315, in check_admin_group
    chat_member = await client.get_chat_member(chat_id=chat_id, user_id=user_id)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\pyrogram\methods\chats\get_chat_member.py", line 92, in get_chat_member
    raise ValueError(f'The chat_id "{chat_id}" belongs to a user')
ValueError: The chat_id "6874062454" belongs to a user
2025-09-13 13:23:15,037 - domination.uteis - ERROR - log_error:57 - Erro ao verificar admin no grupo -1001659176163 12345: Telegram says: [400 PEER_ID_INVALID] - The peer id being used is invalid or not known yet. Make sure you meet the peer before interacting with it 
Traceback (most recent call last):
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\pyrogram\methods\advanced\resolve_peer.py", line 62, in resolve_peer
    return await self.storage.get_peer_by_id(peer_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\pyrogram\storage\sqlite_storage.py", line 142, in get_peer_by_id
    raise KeyError(f"ID not found: {peer_id}")
KeyError: 'ID not found: 12345'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\pyrogram\methods\advanced\resolve_peer.py", line 123, in resolve_peer
    return await self.storage.get_peer_by_id(peer_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\pyrogram\storage\sqlite_storage.py", line 142, in get_peer_by_id
    raise KeyError(f"ID not found: {peer_id}")
KeyError: 'ID not found: 12345'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\ryo\Documents\Domination BOT\uteis.py", line 315, in check_admin_group
    chat_member = await client.get_chat_member(chat_id=chat_id, user_id=user_id)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\pyrogram\methods\chats\get_chat_member.py", line 56, in get_chat_member
    user = await self.resolve_peer(user_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\pyrogram\methods\advanced\resolve_peer.py", line 125, in resolve_peer
    raise PeerIdInvalid
pyrogram.errors.exceptions.bad_request_400.PeerIdInvalid: Telegram says: [400 PEER_ID_INVALID] - The peer id being used is invalid or not known yet. Make sure you meet the peer before interacting with it 
2025-09-13 13:24:06,956 - domination.uteis - ERROR - log_error:57 - Erro ao verificar admin no grupo -1001659176163 12345: Telegram says: [400 PEER_ID_INVALID] - The peer id being used is invalid or not known yet. Make sure you meet the peer before interacting with it 
Traceback (most recent call last):
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\pyrogram\methods\advanced\resolve_peer.py", line 62, in resolve_peer
    return await self.storage.get_peer_by_id(peer_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\pyrogram\storage\sqlite_storage.py", line 142, in get_peer_by_id
    raise KeyError(f"ID not found: {peer_id}")
KeyError: 'ID not found: 12345'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\pyrogram\methods\advanced\resolve_peer.py", line 123, in resolve_peer
    return await self.storage.get_peer_by_id(peer_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\pyrogram\storage\sqlite_storage.py", line 142, in get_peer_by_id
    raise KeyError(f"ID not found: {peer_id}")
KeyError: 'ID not found: 12345'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\ryo\Documents\Domination BOT\uteis.py", line 315, in check_admin_group
    chat_member = await client.get_chat_member(chat_id=chat_id, user_id=user_id)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\pyrogram\methods\chats\get_chat_member.py", line 56, in get_chat_member
    user = await self.resolve_peer(user_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\pyrogram\methods\advanced\resolve_peer.py", line 125, in resolve_peer
    raise PeerIdInvalid
pyrogram.errors.exceptions.bad_request_400.PeerIdInvalid: Telegram says: [400 PEER_ID_INVALID] - The peer id being used is invalid or not known yet. Make sure you meet the peer before interacting with it 
2025-09-13 13:31:45,960 - domination.uteis - ERROR - log_error:57 - Erro ao verificar admin no grupo -1001659176163 12345: Telegram says: [400 PEER_ID_INVALID] - The peer id being used is invalid or not known yet. Make sure you meet the peer before interacting with it 
Traceback (most recent call last):
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\pyrogram\methods\advanced\resolve_peer.py", line 62, in resolve_peer
    return await self.storage.get_peer_by_id(peer_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\pyrogram\storage\sqlite_storage.py", line 142, in get_peer_by_id
    raise KeyError(f"ID not found: {peer_id}")
KeyError: 'ID not found: 12345'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\pyrogram\methods\advanced\resolve_peer.py", line 123, in resolve_peer
    return await self.storage.get_peer_by_id(peer_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\pyrogram\storage\sqlite_storage.py", line 142, in get_peer_by_id
    raise KeyError(f"ID not found: {peer_id}")
KeyError: 'ID not found: 12345'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\ryo\Documents\Domination BOT\uteis.py", line 315, in check_admin_group
    chat_member = await client.get_chat_member(chat_id=chat_id, user_id=user_id)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\pyrogram\methods\chats\get_chat_member.py", line 56, in get_chat_member
    user = await self.resolve_peer(user_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\pyrogram\methods\advanced\resolve_peer.py", line 125, in resolve_peer
    raise PeerIdInvalid
pyrogram.errors.exceptions.bad_request_400.PeerIdInvalid: Telegram says: [400 PEER_ID_INVALID] - The peer id being used is invalid or not known yet. Make sure you meet the peer before interacting with it 
2025-09-13 13:32:31,861 - domination.uteis - ERROR - log_error:57 - Erro ao verificar admin no grupo -1001659176163 12345: Telegram says: [400 PEER_ID_INVALID] - The peer id being used is invalid or not known yet. Make sure you meet the peer before interacting with it 
Traceback (most recent call last):
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\pyrogram\methods\advanced\resolve_peer.py", line 62, in resolve_peer
    return await self.storage.get_peer_by_id(peer_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\pyrogram\storage\sqlite_storage.py", line 142, in get_peer_by_id
    raise KeyError(f"ID not found: {peer_id}")
KeyError: 'ID not found: 12345'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\pyrogram\methods\advanced\resolve_peer.py", line 123, in resolve_peer
    return await self.storage.get_peer_by_id(peer_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\pyrogram\storage\sqlite_storage.py", line 142, in get_peer_by_id
    raise KeyError(f"ID not found: {peer_id}")
KeyError: 'ID not found: 12345'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\ryo\Documents\Domination BOT\uteis.py", line 315, in check_admin_group
    chat_member = await client.get_chat_member(chat_id=chat_id, user_id=user_id)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\pyrogram\methods\chats\get_chat_member.py", line 56, in get_chat_member
    user = await self.resolve_peer(user_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\pyrogram\methods\advanced\resolve_peer.py", line 125, in resolve_peer
    raise PeerIdInvalid
pyrogram.errors.exceptions.bad_request_400.PeerIdInvalid: Telegram says: [400 PEER_ID_INVALID] - The peer id being used is invalid or not known yet. Make sure you meet the peer before interacting with it 
2025-09-13 17:58:40,876 - domination.contador - INFO - log_info:53 - Personagem saiu: megumi fushiguro
2025-09-13 17:59:01,463 - domination.contador - INFO - log_info:53 - Personagem saiu: hu tao and xianling
2025-09-13 18:07:35,252 - domination.commands - INFO - log_info:53 - Comandos definidos - Privados: True, Grupos: True, Admin: True
2025-09-13 18:07:36,893 - domination.commands - INFO - log_info:53 - Comandos definidos - Privados: True, Grupos: True, Admin: True
2025-09-13 18:54:09,766 - domination.commands - INFO - log_info:53 - Comandos definidos - Privados: True, Grupos: True, Admin: True
2025-09-13 18:57:02,830 - domination.commands - INFO - log_info:53 - Comandos definidos - Privados: True, Grupos: True, Admin: True
2025-09-13 18:59:02,778 - domination.commands - INFO - log_info:53 - Comandos definidos - Privados: True, Grupos: True, Admin: True
2025-09-13 19:00:18,575 - domination.commands - INFO - log_info:53 - Comandos definidos - Privados: True, Grupos: True, Admin: True
2025-09-13 19:02:27,421 - domination.contador - INFO - log_info:53 - Personagem saiu: kiana kaslana
2025-09-13 19:03:54,561 - domination.commands - INFO - log_info:53 - Comandos definidos - Privados: True, Grupos: True, Admin: True
2025-09-13 19:22:06,932 - domination.commands - INFO - log_info:53 - Comandos definidos - Privados: True, Grupos: True, Admin: True
2025-09-13 19:22:15,428 - domination.commands - INFO - log_info:53 - Comandos definidos - Privados: True, Grupos: True, Admin: True
2025-09-13 20:19:10,837 - domination.commands - INFO - log_info:53 - Comandos definidos - Privados: True, Grupos: True, Admin: True
2025-09-13 20:19:13,026 - domination.commands - INFO - log_info:53 - Comandos definidos - Privados: True, Grupos: True, Admin: True
2025-09-13 20:20:20,043 - domination.commands - INFO - log_info:53 - Comandos definidos - Privados: True, Grupos: True, Admin: True
2025-09-13 20:20:22,616 - domination.commands - INFO - log_info:53 - Comandos definidos - Privados: True, Grupos: True, Admin: True
2025-09-13 20:21:08,433 - domination.commands - INFO - log_info:53 - Comandos definidos - Privados: True, Grupos: True, Admin: True
2025-09-13 20:21:21,120 - domination.commands - INFO - log_info:53 - Comandos definidos - Privados: True, Grupos: True, Admin: True
2025-09-13 20:22:34,538 - domination.commands - INFO - log_info:53 - Comandos definidos - Privados: True, Grupos: True, Admin: True
2025-09-13 20:22:36,647 - domination.commands - INFO - log_info:53 - Comandos definidos - Privados: True, Grupos: True, Admin: True
2025-09-13 20:24:39,948 - domination.commands - INFO - log_info:53 - Comandos definidos - Privados: True, Grupos: True, Admin: True
2025-09-13 20:24:42,019 - domination.commands - INFO - log_info:53 - Comandos definidos - Privados: True, Grupos: True, Admin: True
2025-09-13 20:28:22,527 - domination.commands - INFO - log_info:53 - Comandos definidos - Privados: True, Grupos: True, Admin: True
2025-09-13 20:28:24,824 - domination.commands - INFO - log_info:53 - Comandos definidos - Privados: True, Grupos: True, Admin: True
2025-09-13 20:28:56,489 - domination.commands - INFO - log_info:53 - Comandos definidos - Privados: True, Grupos: True, Admin: True
2025-09-13 20:28:58,593 - domination.commands - INFO - log_info:53 - Comandos definidos - Privados: True, Grupos: True, Admin: True
2025-09-13 20:29:09,551 - domination.commands - INFO - log_info:53 - Comandos definidos - Privados: True, Grupos: True, Admin: True
2025-09-13 20:29:11,712 - domination.commands - INFO - log_info:53 - Comandos definidos - Privados: True, Grupos: True, Admin: True
2025-09-13 20:29:22,385 - domination.contador - INFO - log_info:53 - Personagem saiu: madara uchiha
2025-09-13 20:29:23,255 - domination.contador - INFO - log_info:53 - Personagem saiu: hitori gotou
2025-09-13 21:02:32,811 - domination.commands - INFO - log_info:53 - Comandos definidos - Privados: True, Grupos: True, Admin: True
2025-09-13 21:02:35,022 - domination.commands - INFO - log_info:53 - Comandos definidos - Privados: True, Grupos: True, Admin: True
2025-09-13 21:05:35,485 - domination.commands - INFO - log_info:53 - Comandos definidos - Privados: True, Grupos: True, Admin: True
2025-09-13 21:05:37,687 - domination.commands - INFO - log_info:53 - Comandos definidos - Privados: True, Grupos: True, Admin: True
2025-09-13 21:05:50,690 - domination.harem_mode - INFO - log_info:53 - Modo harém atualizado para: ANIME
2025-09-13 21:05:50,843 - domination.harem_mode - INFO - log_info:53 - Botões inline atualizados com sucesso
2025-09-13 21:06:08,437 - domination.harem_mode - INFO - log_info:53 - Modo harém atualizado para: RARIDADE_ESPECTRAL
2025-09-13 21:06:08,593 - domination.harem_mode - INFO - log_info:53 - Botões inline atualizados com sucesso
2025-09-13 21:10:58,724 - domination.commands - INFO - log_info:53 - Comandos definidos - Privados: True, Grupos: True, Admin: True
2025-09-13 21:11:00,737 - domination.commands - INFO - log_info:53 - Comandos definidos - Privados: True, Grupos: True, Admin: True
2025-09-13 21:12:46,786 - domination.commands - INFO - log_info:53 - Comandos definidos - Privados: True, Grupos: True, Admin: True
2025-09-13 21:12:48,947 - domination.commands - INFO - log_info:53 - Comandos definidos - Privados: True, Grupos: True, Admin: True
2025-09-14 19:02:42,763 - domination.commands - INFO - log_info:53 - Comandos definidos - Privados: True, Grupos: True, Admin: True
2025-09-14 19:02:47,474 - domination.commands - INFO - log_info:53 - Comandos definidos - Privados: True, Grupos: True, Admin: True
2025-09-14 19:08:19,258 - domination.commands - INFO - log_info:53 - Comandos definidos - Privados: True, Grupos: True, Admin: True
2025-09-14 19:09:06,306 - domination.commands - INFO - log_info:53 - Comandos definidos - Privados: True, Grupos: True, Admin: True
2025-09-14 19:11:17,812 - domination.commands - INFO - log_info:53 - Comandos definidos - Privados: True, Grupos: True, Admin: True
2025-09-14 19:13:32,533 - domination.commands - INFO - log_info:53 - Comandos definidos - Privados: True, Grupos: True, Admin: True
2025-09-14 19:14:25,057 - domination.commands - INFO - log_info:53 - Comandos definidos - Privados: True, Grupos: True, Admin: True
2025-09-14 19:14:41,442 - domination.commands - INFO - log_info:53 - Comandos definidos - Privados: True, Grupos: True, Admin: True
2025-09-14 19:15:46,875 - domination.commands - INFO - log_info:53 - Comandos definidos - Privados: True, Grupos: True, Admin: True
2025-09-14 19:15:55,235 - domination.commands - INFO - log_info:53 - Comandos definidos - Privados: True, Grupos: True, Admin: True
2025-09-14 19:17:34,090 - domination.commands - INFO - log_info:53 - Comandos definidos - Privados: True, Grupos: True, Admin: True
2025-09-14 19:17:35,859 - domination.commands - INFO - log_info:53 - Comandos definidos - Privados: True, Grupos: True, Admin: True
2025-09-14 19:18:41,490 - domination.commands - INFO - log_info:53 - Comandos definidos - Privados: True, Grupos: True, Admin: True
2025-09-14 19:18:44,010 - domination.commands - INFO - log_info:53 - Comandos definidos - Privados: True, Grupos: True, Admin: True
2025-09-14 19:21:02,485 - domination.commands - INFO - log_info:53 - Comandos definidos - Privados: True, Grupos: True, Admin: True
2025-09-14 19:21:04,479 - domination.commands - INFO - log_info:53 - Comandos definidos - Privados: True, Grupos: True, Admin: True
2025-09-14 19:21:51,959 - domination.commands - INFO - log_info:53 - Comandos definidos - Privados: True, Grupos: True, Admin: True
2025-09-14 19:24:38,267 - domination.commands - INFO - log_info:53 - Comandos definidos - Privados: True, Grupos: True, Admin: True
2025-09-14 19:25:03,569 - domination.commands - INFO - log_info:53 - Comandos definidos - Privados: True, Grupos: True, Admin: True
2025-09-14 19:26:01,148 - domination.contador - INFO - log_info:53 - Personagem saiu: violet evergarden
2025-09-14 19:26:23,550 - domination.contador - INFO - log_info:53 - Personagem saiu: hinata hyuga
2025-09-14 19:27:04,585 - domination.contador - INFO - log_info:53 - Personagem saiu: yukino yukinoshita
2025-09-14 19:28:01,668 - domination.contador - INFO - log_info:53 - Personagem saiu: hoshimachi suisei
2025-09-14 19:30:21,876 - domination.commands - INFO - log_info:53 - Comandos definidos - Privados: True, Grupos: True, Admin: True
2025-09-14 19:32:44,665 - domination.commands - INFO - log_info:53 - Comandos definidos - Privados: True, Grupos: True, Admin: True
2025-09-14 19:34:22,785 - domination.commands - INFO - log_info:53 - Comandos definidos - Privados: True, Grupos: True, Admin: True
2025-09-16 20:35:22,827 - domination.commands - INFO - log_info:53 - Comandos definidos - Privados: True, Grupos: True, Admin: True
2025-09-16 20:38:33,995 - domination.commands - INFO - log_info:53 - Comandos definidos - Privados: True, Grupos: True, Admin: True
2025-09-16 20:40:21,630 - domination.commands - INFO - log_info:53 - Comandos definidos - Privados: True, Grupos: True, Admin: True
2025-09-16 20:44:22,742 - domination.commands - INFO - log_info:53 - Comandos definidos - Privados: True, Grupos: True, Admin: True
2025-09-16 20:44:48,802 - domination.dominar - ERROR - log_error:57 - Erro ao salvar usuário/coleção: Class 'builtins.list' is not mapped
Traceback (most recent call last):
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 3143, in refresh
    state = attributes.instance_state(instance)
AttributeError: 'list' object has no attribute '_sa_instance_state'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\ryo\Documents\Domination BOT\uteis.py", line 436, in add_per_coletion
    return await DATABASE.add_object_commit(objs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\ryo\Documents\Domination BOT\DB\database.py", line 48, in add_object_commit
    await session.refresh(obj)  # atualiza atributos (ex: id)
    ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 331, in refresh
    await greenlet_spawn(
    ...<4 lines>...
    )
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 190, in greenlet_spawn
    result = context.switch(*args, **kwargs)
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 3145, in refresh
    raise exc.UnmappedInstanceError(instance) from err
sqlalchemy.orm.exc.UnmappedInstanceError: Class 'builtins.list' is not mapped
2025-09-16 20:45:05,678 - domination.dominar - ERROR - log_error:57 - Erro ao salvar usuário/coleção: Class 'builtins.list' is not mapped
Traceback (most recent call last):
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 3143, in refresh
    state = attributes.instance_state(instance)
AttributeError: 'list' object has no attribute '_sa_instance_state'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\ryo\Documents\Domination BOT\uteis.py", line 436, in add_per_coletion
    return await DATABASE.add_object_commit(objs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\ryo\Documents\Domination BOT\DB\database.py", line 48, in add_object_commit
    await session.refresh(obj)  # atualiza atributos (ex: id)
    ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 331, in refresh
    await greenlet_spawn(
    ...<4 lines>...
    )
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 190, in greenlet_spawn
    result = context.switch(*args, **kwargs)
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 3145, in refresh
    raise exc.UnmappedInstanceError(instance) from err
sqlalchemy.orm.exc.UnmappedInstanceError: Class 'builtins.list' is not mapped
2025-09-16 20:45:36,571 - domination.commands - INFO - log_info:53 - Comandos definidos - Privados: True, Grupos: True, Admin: True
2025-09-16 20:47:36,848 - domination.commands - INFO - log_info:53 - Comandos definidos - Privados: True, Grupos: True, Admin: True
2025-09-16 20:52:43,027 - domination.commands - INFO - log_info:53 - Comandos definidos - Privados: True, Grupos: True, Admin: True
2025-09-16 21:12:57,069 - domination.commands - INFO - log_info:53 - Comandos definidos - Privados: True, Grupos: True, Admin: True
2025-09-16 21:14:05,448 - domination.commands - INFO - log_info:53 - Comandos definidos - Privados: True, Grupos: True, Admin: True
2025-09-16 21:20:45,130 - domination.commands - INFO - log_info:53 - Comandos definidos - Privados: True, Grupos: True, Admin: True
2025-09-16 21:20:46,888 - domination.commands - INFO - log_info:53 - Comandos definidos - Privados: True, Grupos: True, Admin: True
2025-09-16 21:22:03,256 - domination.commands - INFO - log_info:53 - Comandos definidos - Privados: True, Grupos: True, Admin: True
2025-09-16 21:22:05,420 - domination.commands - INFO - log_info:53 - Comandos definidos - Privados: True, Grupos: True, Admin: True
2025-09-17 00:03:06,627 - domination.commands - INFO - log_info:53 - Comandos definidos - Privados: True, Grupos: True, Admin: True
2025-09-17 00:03:08,661 - domination.commands - INFO - log_info:53 - Comandos definidos - Privados: True, Grupos: True, Admin: True
2025-09-17 00:04:32,979 - domination.commands - INFO - log_info:53 - Comandos definidos - Privados: True, Grupos: True, Admin: True
2025-09-17 00:04:34,935 - domination.commands - INFO - log_info:53 - Comandos definidos - Privados: True, Grupos: True, Admin: True
2025-09-17 00:05:47,538 - domination.commands - INFO - log_info:53 - Comandos definidos - Privados: True, Grupos: True, Admin: True
2025-09-17 00:05:49,696 - domination.commands - INFO - log_info:53 - Comandos definidos - Privados: True, Grupos: True, Admin: True
2025-09-17 00:06:14,869 - domination.commands - INFO - log_info:53 - Comandos definidos - Privados: True, Grupos: True, Admin: True
2025-09-17 00:06:16,931 - domination.commands - INFO - log_info:53 - Comandos definidos - Privados: True, Grupos: True, Admin: True
2025-09-17 00:07:00,194 - domination.commands - INFO - log_info:53 - Comandos definidos - Privados: True, Grupos: True, Admin: True
2025-09-17 00:07:02,350 - domination.commands - INFO - log_info:53 - Comandos definidos - Privados: True, Grupos: True, Admin: True
2025-09-17 00:07:44,441 - domination.commands - INFO - log_info:53 - Comandos definidos - Privados: True, Grupos: True, Admin: True
2025-09-17 00:07:46,381 - domination.commands - INFO - log_info:53 - Comandos definidos - Privados: True, Grupos: True, Admin: True
2025-09-17 00:08:27,080 - domination.commands - INFO - log_info:53 - Comandos definidos - Privados: True, Grupos: True, Admin: True
2025-09-17 00:08:29,002 - domination.commands - INFO - log_info:53 - Comandos definidos - Privados: True, Grupos: True, Admin: True
2025-09-17 00:11:30,205 - domination.commands - INFO - log_info:53 - Comandos definidos - Privados: True, Grupos: True, Admin: True
2025-09-17 00:11:32,040 - domination.commands - INFO - log_info:53 - Comandos definidos - Privados: True, Grupos: True, Admin: True
2025-09-17 00:12:14,712 - domination.contador - INFO - log_info:53 - Personagem saiu: : super buu
(
2025-09-17 00:12:15,477 - domination.contador - INFO - log_info:53 - Personagem saiu: grayfia lucifuge
2025-09-17 00:15:05,172 - domination.commands - INFO - log_info:53 - Comandos definidos - Privados: True, Grupos: True, Admin: True
2025-09-17 00:15:52,718 - domination.commands - INFO - log_info:53 - Comandos definidos - Privados: True, Grupos: True, Admin: True
2025-09-17 00:16:41,071 - domination.commands - INFO - log_info:53 - Comandos definidos - Privados: True, Grupos: True, Admin: True
2025-09-17 00:16:54,528 - domination.contador - INFO - log_info:53 - Personagem saiu: toneri outsutsuki
2025-09-17 00:20:38,896 - domination.commands - INFO - log_info:53 - Comandos definidos - Privados: True, Grupos: True, Admin: True
2025-09-17 00:20:53,009 - domination.contador - INFO - log_info:53 - Personagem saiu: superman x carnificina
2025-09-17 00:21:23,040 - domination.dominar - INFO - log_info:53 - Dominar: Sucesso! Usuário 6874062454 dominou superman x carnificina (ID: 118)
2025-09-17 00:21:43,137 - domination.contador - INFO - log_info:53 - Personagem saiu: toushirou hitsugaya
2025-09-17 00:27:06,141 - domination.contador - INFO - log_info:53 - Personagem saiu: homem aranha
2025-09-17 00:29:00,303 - domination.commands - INFO - log_info:53 - Comandos definidos - Privados: True, Grupos: True, Admin: True
2025-09-17 00:31:09,854 - domination.commands - INFO - log_info:53 - Comandos definidos - Privados: True, Grupos: True, Admin: True
2025-09-17 00:34:18,054 - domination.contador - INFO - log_info:53 - Personagem saiu: zandik (il dottore
2025-09-17 00:34:31,745 - domination.dominar - ERROR - log_error:57 - Erro ao salvar usuário/coleção: (builtins.TypeError) Object of type function is not JSON serializable
[SQL: INSERT INTO usuarios (telegram_id, telegram_from_user, fav_w_id, fav_h_id, perfil_status, configs_w, configs_h, idioma_preferido) VALUES ($1::BIGINT, $2::JSON, $3::INTEGER, $4::INTEGER, $5::tipoperfil, $6::JSON, $7::JSON, $8::idioma) RETURNING usuarios.id, usuarios.created_at]
[parameters: [{'telegram_id': 422779743, 'perfil_status': <TipoPerfil.USUARIO: 'USER'>, 'fav_h_id': 838, 'configs_h': <function Usuario.<lambda> at 0x000001BAB4919E ... (101 characters truncated) ... anilo", "last_name": null, "username": "Dann_4k", "is_bot": false}', 'configs_w': <function Usuario.<lambda> at 0x000001BAB4919DA0>, 'fav_w_id': None}]]
Traceback (most recent call last):
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1815, in _execute_context
    context = constructor(
        dialect, self, conn, execution_options, *args, **kw
    )
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 1493, in _init_compiled
    flattened_processors[key](compiled_params[key])
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\sqlalchemy\sql\sqltypes.py", line 2801, in process
    return json_serializer(value)
  File "C:\Users\ryo\AppData\Local\Programs\Python\Python313\Lib\json\__init__.py", line 231, in dumps
    return _default_encoder.encode(obj)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "C:\Users\ryo\AppData\Local\Programs\Python\Python313\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "C:\Users\ryo\AppData\Local\Programs\Python\Python313\Lib\json\encoder.py", line 261, in iterencode
    return _iterencode(o, 0)
  File "C:\Users\ryo\AppData\Local\Programs\Python\Python313\Lib\json\encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
                    f'is not JSON serializable')
TypeError: Object of type function is not JSON serializable

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\ryo\Documents\Domination BOT\uteis.py", line 436, in add_per_coletion
    return await DATABASE.add_object_commit(objs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\ryo\Documents\Domination BOT\DB\database.py", line 45, in add_object_commit
    await session.commit()
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 1014, in commit
    await greenlet_spawn(self.sync_session.commit)
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 190, in greenlet_spawn
    result = context.switch(*args, **kwargs)
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2032, in commit
    trans.commit(_to_root=True)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "<string>", line 2, in commit
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1313, in commit
    self._prepare_impl()
    ~~~~~~~~~~~~~~~~~~^^
  File "<string>", line 2, in _prepare_impl
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1288, in _prepare_impl
    self.session.flush()
    ~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4345, in flush
    self._flush(objects)
    ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4480, in _flush
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4441, in _flush
    flush_context.execute()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
    ~~~~~~~~~~~^^^^^^
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self.mapper,
        ^^^^^^^^^^^^
        uow.states_for_mapper_hierarchy(self.mapper, False, False),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        uow,
        ^^^^
    )
    ^
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 93, in save_obj
    _emit_insert_statements(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        base_mapper,
        ^^^^^^^^^^^^
    ...<3 lines>...
        insert,
        ^^^^^^^
    )
    ^
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
        statement,
        params,
        execution_options=execution_options,
    )
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1821, in _execute_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str(statement), parameters, None, None
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1815, in _execute_context
    context = constructor(
        dialect, self, conn, execution_options, *args, **kw
    )
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 1493, in _init_compiled
    flattened_processors[key](compiled_params[key])
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\sqlalchemy\sql\sqltypes.py", line 2801, in process
    return json_serializer(value)
  File "C:\Users\ryo\AppData\Local\Programs\Python\Python313\Lib\json\__init__.py", line 231, in dumps
    return _default_encoder.encode(obj)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "C:\Users\ryo\AppData\Local\Programs\Python\Python313\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "C:\Users\ryo\AppData\Local\Programs\Python\Python313\Lib\json\encoder.py", line 261, in iterencode
    return _iterencode(o, 0)
  File "C:\Users\ryo\AppData\Local\Programs\Python\Python313\Lib\json\encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
                    f'is not JSON serializable')
sqlalchemy.exc.StatementError: (builtins.TypeError) Object of type function is not JSON serializable
[SQL: INSERT INTO usuarios (telegram_id, telegram_from_user, fav_w_id, fav_h_id, perfil_status, configs_w, configs_h, idioma_preferido) VALUES ($1::BIGINT, $2::JSON, $3::INTEGER, $4::INTEGER, $5::tipoperfil, $6::JSON, $7::JSON, $8::idioma) RETURNING usuarios.id, usuarios.created_at]
[parameters: [{'telegram_id': 422779743, 'perfil_status': <TipoPerfil.USUARIO: 'USER'>, 'fav_h_id': 838, 'configs_h': <function Usuario.<lambda> at 0x000001BAB4919E ... (101 characters truncated) ... anilo", "last_name": null, "username": "Dann_4k", "is_bot": false}', 'configs_w': <function Usuario.<lambda> at 0x000001BAB4919DA0>, 'fav_w_id': None}]]
2025-09-17 00:34:31,990 - domination.dominar - ERROR - log_error:57 - Dominar: Erro ao adicionar personagem 838 para usuário 422779743
2025-09-17 00:37:35,222 - domination.commands - INFO - log_info:53 - Comandos definidos - Privados: True, Grupos: True, Admin: True
2025-09-17 00:37:55,895 - domination.contador - INFO - log_info:53 - Personagem saiu: sosuke aizen
2025-09-17 00:38:16,825 - domination.dominar - ERROR - log_error:57 - Erro ao salvar usuário/coleção: (builtins.TypeError) Object of type function is not JSON serializable
[SQL: INSERT INTO usuarios (telegram_id, telegram_from_user, fav_w_id, fav_h_id, perfil_status, configs_w, configs_h, idioma_preferido) VALUES ($1::BIGINT, $2::JSON, $3::INTEGER, $4::INTEGER, $5::tipoperfil, $6::JSON, $7::JSON, $8::idioma) RETURNING usuarios.id, usuarios.created_at]
[parameters: [{'telegram_id': 422779743, 'idioma_preferido': <Idioma.PT: 'pt'>, 'perfil_status': <TipoPerfil.USUARIO: 'USER'>, 'configs_w': <function Usuario.<lambd ... (98 characters truncated) ... am_from_user': {'id': 422779743, 'first_name': 'Danilo', 'last_name': None, 'username': 'Dann_4k', 'is_bot': False}, 'fav_h_id': 18, 'fav_w_id': None}]]
Traceback (most recent call last):
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1815, in _execute_context
    context = constructor(
        dialect, self, conn, execution_options, *args, **kw
    )
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 1493, in _init_compiled
    flattened_processors[key](compiled_params[key])
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\sqlalchemy\sql\sqltypes.py", line 2801, in process
    return json_serializer(value)
  File "C:\Users\ryo\AppData\Local\Programs\Python\Python313\Lib\json\__init__.py", line 231, in dumps
    return _default_encoder.encode(obj)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "C:\Users\ryo\AppData\Local\Programs\Python\Python313\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "C:\Users\ryo\AppData\Local\Programs\Python\Python313\Lib\json\encoder.py", line 261, in iterencode
    return _iterencode(o, 0)
  File "C:\Users\ryo\AppData\Local\Programs\Python\Python313\Lib\json\encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
                    f'is not JSON serializable')
TypeError: Object of type function is not JSON serializable

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\ryo\Documents\Domination BOT\uteis.py", line 436, in add_per_coletion
    return await DATABASE.add_object_commit(objs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\ryo\Documents\Domination BOT\DB\database.py", line 45, in add_object_commit
    await session.commit()
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 1014, in commit
    await greenlet_spawn(self.sync_session.commit)
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 190, in greenlet_spawn
    result = context.switch(*args, **kwargs)
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2032, in commit
    trans.commit(_to_root=True)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "<string>", line 2, in commit
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1313, in commit
    self._prepare_impl()
    ~~~~~~~~~~~~~~~~~~^^
  File "<string>", line 2, in _prepare_impl
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1288, in _prepare_impl
    self.session.flush()
    ~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4345, in flush
    self._flush(objects)
    ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4480, in _flush
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4441, in _flush
    flush_context.execute()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
    ~~~~~~~~~~~^^^^^^
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self.mapper,
        ^^^^^^^^^^^^
        uow.states_for_mapper_hierarchy(self.mapper, False, False),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        uow,
        ^^^^
    )
    ^
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 93, in save_obj
    _emit_insert_statements(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        base_mapper,
        ^^^^^^^^^^^^
    ...<3 lines>...
        insert,
        ^^^^^^^
    )
    ^
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
        statement,
        params,
        execution_options=execution_options,
    )
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1821, in _execute_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str(statement), parameters, None, None
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1815, in _execute_context
    context = constructor(
        dialect, self, conn, execution_options, *args, **kw
    )
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 1493, in _init_compiled
    flattened_processors[key](compiled_params[key])
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\sqlalchemy\sql\sqltypes.py", line 2801, in process
    return json_serializer(value)
  File "C:\Users\ryo\AppData\Local\Programs\Python\Python313\Lib\json\__init__.py", line 231, in dumps
    return _default_encoder.encode(obj)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "C:\Users\ryo\AppData\Local\Programs\Python\Python313\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "C:\Users\ryo\AppData\Local\Programs\Python\Python313\Lib\json\encoder.py", line 261, in iterencode
    return _iterencode(o, 0)
  File "C:\Users\ryo\AppData\Local\Programs\Python\Python313\Lib\json\encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
                    f'is not JSON serializable')
sqlalchemy.exc.StatementError: (builtins.TypeError) Object of type function is not JSON serializable
[SQL: INSERT INTO usuarios (telegram_id, telegram_from_user, fav_w_id, fav_h_id, perfil_status, configs_w, configs_h, idioma_preferido) VALUES ($1::BIGINT, $2::JSON, $3::INTEGER, $4::INTEGER, $5::tipoperfil, $6::JSON, $7::JSON, $8::idioma) RETURNING usuarios.id, usuarios.created_at]
[parameters: [{'telegram_id': 422779743, 'idioma_preferido': <Idioma.PT: 'pt'>, 'perfil_status': <TipoPerfil.USUARIO: 'USER'>, 'configs_w': <function Usuario.<lambd ... (98 characters truncated) ... am_from_user': {'id': 422779743, 'first_name': 'Danilo', 'last_name': None, 'username': 'Dann_4k', 'is_bot': False}, 'fav_h_id': 18, 'fav_w_id': None}]]
2025-09-17 00:38:16,850 - domination.dominar - ERROR - log_error:57 - Dominar: Erro ao adicionar personagem 18 para usuário 422779743
2025-09-17 00:41:55,523 - domination.commands - INFO - log_info:53 - Comandos definidos - Privados: True, Grupos: True, Admin: True
2025-09-17 00:42:17,291 - domination.contador - INFO - log_info:53 - Personagem saiu: denji
2025-09-17 00:42:41,244 - domination.dominar - ERROR - log_error:57 - Erro ao salvar usuário/coleção: (builtins.TypeError) Object of type function is not JSON serializable
[SQL: INSERT INTO usuarios (telegram_id, telegram_from_user, fav_w_id, fav_h_id, perfil_status, configs_w, configs_h, idioma_preferido) VALUES ($1::BIGINT, $2::JSON, $3::INTEGER, $4::INTEGER, $5::tipoperfil, $6::JSON, $7::JSON, $8::idioma) RETURNING usuarios.id, usuarios.created_at]
[parameters: [{'idioma_preferido': <Idioma.PT: 'pt'>, 'telegram_id': 422779743, 'telegram_from_user': {'id': 422779743, 'first_name': 'Danilo', 'last_name': None, ' ... (76 characters truncated) ... tion Usuario.<lambda> at 0x0000027B4316DEE0>, 'configs_w': <function Usuario.<lambda> at 0x0000027B4316DDA0>, 'fav_w_id': None, 'perfil_status': None}]]
Traceback (most recent call last):
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1815, in _execute_context
    context = constructor(
        dialect, self, conn, execution_options, *args, **kw
    )
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 1493, in _init_compiled
    flattened_processors[key](compiled_params[key])
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\sqlalchemy\sql\sqltypes.py", line 2801, in process
    return json_serializer(value)
  File "C:\Users\ryo\AppData\Local\Programs\Python\Python313\Lib\json\__init__.py", line 231, in dumps
    return _default_encoder.encode(obj)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "C:\Users\ryo\AppData\Local\Programs\Python\Python313\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "C:\Users\ryo\AppData\Local\Programs\Python\Python313\Lib\json\encoder.py", line 261, in iterencode
    return _iterencode(o, 0)
  File "C:\Users\ryo\AppData\Local\Programs\Python\Python313\Lib\json\encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
                    f'is not JSON serializable')
TypeError: Object of type function is not JSON serializable

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\ryo\Documents\Domination BOT\uteis.py", line 436, in add_per_coletion
    return await DATABASE.add_object_commit(objs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\ryo\Documents\Domination BOT\DB\database.py", line 45, in add_object_commit
    await session.commit()
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 1014, in commit
    await greenlet_spawn(self.sync_session.commit)
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 190, in greenlet_spawn
    result = context.switch(*args, **kwargs)
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2032, in commit
    trans.commit(_to_root=True)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "<string>", line 2, in commit
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1313, in commit
    self._prepare_impl()
    ~~~~~~~~~~~~~~~~~~^^
  File "<string>", line 2, in _prepare_impl
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1288, in _prepare_impl
    self.session.flush()
    ~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4345, in flush
    self._flush(objects)
    ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4480, in _flush
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4441, in _flush
    flush_context.execute()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
    ~~~~~~~~~~~^^^^^^
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self.mapper,
        ^^^^^^^^^^^^
        uow.states_for_mapper_hierarchy(self.mapper, False, False),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        uow,
        ^^^^
    )
    ^
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 93, in save_obj
    _emit_insert_statements(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        base_mapper,
        ^^^^^^^^^^^^
    ...<3 lines>...
        insert,
        ^^^^^^^
    )
    ^
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
        statement,
        params,
        execution_options=execution_options,
    )
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1821, in _execute_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str(statement), parameters, None, None
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1815, in _execute_context
    context = constructor(
        dialect, self, conn, execution_options, *args, **kw
    )
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 1493, in _init_compiled
    flattened_processors[key](compiled_params[key])
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\sqlalchemy\sql\sqltypes.py", line 2801, in process
    return json_serializer(value)
  File "C:\Users\ryo\AppData\Local\Programs\Python\Python313\Lib\json\__init__.py", line 231, in dumps
    return _default_encoder.encode(obj)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "C:\Users\ryo\AppData\Local\Programs\Python\Python313\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "C:\Users\ryo\AppData\Local\Programs\Python\Python313\Lib\json\encoder.py", line 261, in iterencode
    return _iterencode(o, 0)
  File "C:\Users\ryo\AppData\Local\Programs\Python\Python313\Lib\json\encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
                    f'is not JSON serializable')
sqlalchemy.exc.StatementError: (builtins.TypeError) Object of type function is not JSON serializable
[SQL: INSERT INTO usuarios (telegram_id, telegram_from_user, fav_w_id, fav_h_id, perfil_status, configs_w, configs_h, idioma_preferido) VALUES ($1::BIGINT, $2::JSON, $3::INTEGER, $4::INTEGER, $5::tipoperfil, $6::JSON, $7::JSON, $8::idioma) RETURNING usuarios.id, usuarios.created_at]
[parameters: [{'idioma_preferido': <Idioma.PT: 'pt'>, 'telegram_id': 422779743, 'telegram_from_user': {'id': 422779743, 'first_name': 'Danilo', 'last_name': None, ' ... (76 characters truncated) ... tion Usuario.<lambda> at 0x0000027B4316DEE0>, 'configs_w': <function Usuario.<lambda> at 0x0000027B4316DDA0>, 'fav_w_id': None, 'perfil_status': None}]]
2025-09-17 00:42:41,273 - domination.dominar - ERROR - log_error:57 - Dominar: Erro ao adicionar personagem 1050 para usuário 422779743
2025-09-17 00:45:16,064 - domination.commands - INFO - log_info:53 - Comandos definidos - Privados: True, Grupos: True, Admin: True
2025-09-17 00:45:28,172 - domination.contador - INFO - log_info:53 - Personagem saiu: sasuke uchiha
2025-09-17 00:45:38,652 - domination.dominar - ERROR - log_error:57 - Erro ao salvar usuário/coleção: (builtins.TypeError) Object of type function is not JSON serializable
[SQL: INSERT INTO usuarios (telegram_id, telegram_from_user, fav_w_id, fav_h_id, perfil_status, configs_w, configs_h, idioma_preferido) VALUES ($1::BIGINT, $2::JSON, $3::INTEGER, $4::INTEGER, $5::tipoperfil, $6::JSON, $7::JSON, $8::idioma) RETURNING usuarios.id, usuarios.created_at]
[parameters: [{'telegram_from_user': '{"id": 422779743, "first_name": "Danilo", "last_name": null, "username": "Dann_4k", "is_bot": false}', 'idioma_preferido': <Id ... (77 characters truncated) ... x00000177999C9EE0>, 'configs_w': <function Usuario.<lambda> at 0x00000177999C9DA0>, 'telegram_id': 422779743, 'fav_w_id': None, 'perfil_status': None}]]
Traceback (most recent call last):
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1815, in _execute_context
    context = constructor(
        dialect, self, conn, execution_options, *args, **kw
    )
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 1493, in _init_compiled
    flattened_processors[key](compiled_params[key])
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\sqlalchemy\sql\sqltypes.py", line 2801, in process
    return json_serializer(value)
  File "C:\Users\ryo\AppData\Local\Programs\Python\Python313\Lib\json\__init__.py", line 231, in dumps
    return _default_encoder.encode(obj)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "C:\Users\ryo\AppData\Local\Programs\Python\Python313\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "C:\Users\ryo\AppData\Local\Programs\Python\Python313\Lib\json\encoder.py", line 261, in iterencode
    return _iterencode(o, 0)
  File "C:\Users\ryo\AppData\Local\Programs\Python\Python313\Lib\json\encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
                    f'is not JSON serializable')
TypeError: Object of type function is not JSON serializable

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "c:\Users\ryo\Documents\Domination BOT\uteis.py", line 436, in add_per_coletion
    return await DATABASE.add_object_commit(objs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\ryo\Documents\Domination BOT\DB\database.py", line 45, in add_object_commit
    await session.commit()
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 1014, in commit
    await greenlet_spawn(self.sync_session.commit)
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 190, in greenlet_spawn
    result = context.switch(*args, **kwargs)
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2032, in commit
    trans.commit(_to_root=True)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "<string>", line 2, in commit
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1313, in commit
    self._prepare_impl()
    ~~~~~~~~~~~~~~~~~~^^
  File "<string>", line 2, in _prepare_impl
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1288, in _prepare_impl
    self.session.flush()
    ~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4345, in flush
    self._flush(objects)
    ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4480, in _flush
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4441, in _flush
    flush_context.execute()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
    ~~~~~~~~~~~^^^^^^
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self.mapper,
        ^^^^^^^^^^^^
        uow.states_for_mapper_hierarchy(self.mapper, False, False),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        uow,
        ^^^^
    )
    ^
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 93, in save_obj
    _emit_insert_statements(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        base_mapper,
        ^^^^^^^^^^^^
    ...<3 lines>...
        insert,
        ^^^^^^^
    )
    ^
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
        statement,
        params,
        execution_options=execution_options,
    )
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1821, in _execute_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str(statement), parameters, None, None
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1815, in _execute_context
    context = constructor(
        dialect, self, conn, execution_options, *args, **kw
    )
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 1493, in _init_compiled
    flattened_processors[key](compiled_params[key])
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\ryo\Documents\Domination BOT\.venv\Lib\site-packages\sqlalchemy\sql\sqltypes.py", line 2801, in process
    return json_serializer(value)
  File "C:\Users\ryo\AppData\Local\Programs\Python\Python313\Lib\json\__init__.py", line 231, in dumps
    return _default_encoder.encode(obj)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "C:\Users\ryo\AppData\Local\Programs\Python\Python313\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "C:\Users\ryo\AppData\Local\Programs\Python\Python313\Lib\json\encoder.py", line 261, in iterencode
    return _iterencode(o, 0)
  File "C:\Users\ryo\AppData\Local\Programs\Python\Python313\Lib\json\encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
                    f'is not JSON serializable')
sqlalchemy.exc.StatementError: (builtins.TypeError) Object of type function is not JSON serializable
[SQL: INSERT INTO usuarios (telegram_id, telegram_from_user, fav_w_id, fav_h_id, perfil_status, configs_w, configs_h, idioma_preferido) VALUES ($1::BIGINT, $2::JSON, $3::INTEGER, $4::INTEGER, $5::tipoperfil, $6::JSON, $7::JSON, $8::idioma) RETURNING usuarios.id, usuarios.created_at]
[parameters: [{'telegram_from_user': '{"id": 422779743, "first_name": "Danilo", "last_name": null, "username": "Dann_4k", "is_bot": false}', 'idioma_preferido': <Id ... (77 characters truncated) ... x00000177999C9EE0>, 'configs_w': <function Usuario.<lambda> at 0x00000177999C9DA0>, 'telegram_id': 422779743, 'fav_w_id': None, 'perfil_status': None}]]
2025-09-17 00:45:38,680 - domination.dominar - ERROR - log_error:57 - Dominar: Erro ao adicionar personagem 195 para usuário 422779743
2025-09-17 00:47:31,827 - domination.commands - INFO - log_info:53 - Comandos definidos - Privados: True, Grupos: True, Admin: True
2025-09-17 00:47:54,343 - domination.contador - INFO - log_info:53 - Personagem saiu: : ryuk x ghost rider
(
2025-09-17 00:48:07,853 - domination.dominar - INFO - log_info:53 - Dominar: Sucesso! Usuário 422779743 dominou : ryuk x ghost rider
( (ID: 986)
2025-09-17 00:50:31,710 - domination.commands - INFO - log_info:53 - Comandos definidos - Privados: True, Grupos: True, Admin: True
2025-09-17 00:51:21,387 - domination.contador - INFO - log_info:53 - Personagem saiu: kevin kaslana
2025-09-17 00:51:45,630 - domination.dominar - INFO - log_info:53 - Dominar: Sucesso! Usuário 422779743 dominou kevin kaslana (ID: 292)
2025-09-17 00:52:58,892 - domination.commands - INFO - log_info:53 - Comandos definidos - Privados: True, Grupos: True, Admin: True
2025-09-17 00:54:27,848 - domination.commands - INFO - log_info:53 - Comandos definidos - Privados: True, Grupos: True, Admin: True
2025-09-17 00:54:35,328 - domination.commands - INFO - log_info:53 - Comandos definidos - Privados: True, Grupos: True, Admin: True
2025-09-17 00:57:40,407 - domination.commands - INFO - log_info:53 - Comandos definidos - Privados: True, Grupos: True, Admin: True
2025-09-17 00:59:27,416 - domination.commands - INFO - log_info:53 - Comandos definidos - Privados: True, Grupos: True, Admin: True
2025-09-17 01:02:14,739 - domination.commands - INFO - log_info:53 - Comandos definidos - Privados: True, Grupos: True, Admin: True
2025-09-17 01:02:33,282 - domination.contador - INFO - log_info:53 - Personagem saiu: venti
2025-09-17 01:02:53,967 - domination.dominar - INFO - log_info:53 - Dominar: Sucesso! Usuário 422779743 dominou venti (ID: 593)
2025-09-17 20:07:20,820 - domination.commands - INFO - log_info:53 - Comandos definidos - Privados: True, Grupos: True, Admin: True
2025-09-17 20:08:52,955 - domination.commands - INFO - log_info:53 - Comandos definidos - Privados: True, Grupos: True, Admin: True
2025-09-17 20:10:20,976 - domination.commands - INFO - log_info:53 - Comandos definidos - Privados: True, Grupos: True, Admin: True
2025-09-17 20:11:13,225 - domination.commands - INFO - log_info:53 - Comandos definidos - Privados: True, Grupos: True, Admin: True
2025-09-17 20:52:51,241 - domination.commands - INFO - log_info:53 - Comandos definidos - Privados: True, Grupos: True, Admin: True
2025-09-17 21:01:00,780 - domination.commands - INFO - log_info:53 - Comandos definidos - Privados: True, Grupos: True, Admin: True
2025-09-17 21:07:19,587 - domination.commands - INFO - log_info:53 - Comandos definidos - Privados: True, Grupos: True, Admin: True
2025-09-21 12:05:58,788 - domination.commands - INFO - log_info:53 - Comandos definidos - Privados: True, Grupos: True, Admin: True
2025-09-21 12:06:02,142 - domination.commands - INFO - log_info:53 - Comandos definidos - Privados: True, Grupos: True, Admin: True
2025-09-21 15:30:35,190 - domination.commands - INFO - log_info:53 - Comandos definidos - Privados: True, Grupos: True, Admin: True
2025-09-21 15:30:37,069 - domination.commands - INFO - log_info:53 - Comandos definidos - Privados: True, Grupos: True, Admin: True
2025-09-21 15:35:12,779 - domination.commands - INFO - log_info:53 - Comandos definidos - Privados: True, Grupos: True, Admin: True
2025-09-21 15:35:15,040 - domination.commands - INFO - log_info:53 - Comandos definidos - Privados: True, Grupos: True, Admin: True
2025-09-21 15:36:53,157 - domination.commands - INFO - log_info:53 - Comandos definidos - Privados: True, Grupos: True, Admin: True
2025-09-21 15:36:55,318 - domination.commands - INFO - log_info:53 - Comandos definidos - Privados: True, Grupos: True, Admin: True
2025-09-21 15:39:37,713 - domination.commands - INFO - log_info:53 - Comandos definidos - Privados: True, Grupos: True, Admin: True
2025-09-21 15:39:39,639 - domination.commands - INFO - log_info:53 - Comandos definidos - Privados: True, Grupos: True, Admin: True
2025-09-21 15:56:42,193 - domination.commands - INFO - log_info:53 - Comandos definidos - Privados: True, Grupos: True, Admin: True
2025-09-21 15:56:44,486 - domination.commands - INFO - log_info:53 - Comandos definidos - Privados: True, Grupos: True, Admin: True
2025-09-21 15:57:29,811 - domination.contador - INFO - log_info:53 - Personagem saiu: : hanabishi haruka
(
2025-09-21 15:57:30,544 - domination.contador - INFO - log_info:53 - Personagem saiu: asta
2025-09-21 15:58:36,703 - domination.dominar - INFO - log_info:53 - Dominar: Sucesso! Usuário 6874062454 dominou asta (ID: 1048)
2025-09-21 16:07:40,357 - domination.contador - INFO - log_info:53 - Personagem saiu: sasuke uchiha
2025-09-21 16:16:09,220 - domination.commands - INFO - log_info:53 - Comandos definidos - Privados: True, Grupos: True, Admin: True
2025-09-21 16:16:11,112 - domination.commands - INFO - log_info:53 - Comandos definidos - Privados: True, Grupos: True, Admin: True
2025-09-21 16:17:00,336 - domination.contador - INFO - log_info:53 - Personagem saiu: : kenta yumiya
(
2025-09-21 16:17:01,001 - domination.contador - INFO - log_info:53 - Personagem saiu: clube de ocultismo
2025-09-21 16:17:53,463 - domination.dominar - INFO - log_info:53 - Dominar: Sucesso! Usuário 6874062454 dominou clube de ocultismo (ID: 357)
2025-09-21 16:18:11,891 - domination.contador - INFO - log_info:53 - Personagem saiu: hilda
